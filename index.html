<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Three.js Basics</title>
    <meta name="viewport" content="width=device-width">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script
        src="https://unpkg.com/@c-frame/aframe-particle-system-component@1.2.x/dist/aframe-particle-system-component.min.js"></script>



    <style>
        body {
            margin: 0;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <a-scene light="defaultLightsEnabled: false" shadow="enabled: true; type: pcfs" spawn-houses>

        <!-- plane -->
        <a-plane rotation="-90 -1 0" width="100" height="100" color="#7BC8A4"></a-plane>

        <!-- sky -->

        <a-sky color="#000030"></a-sky>


        <!--cam-->
        <!--1.3684590296822483-->

        <a-camera position=" -4.22631077911584 7.416666666666692 0.436799087409643"   extended-wasd-controls  keyboard-movement look-controls="pointerLockEnabled: true">

     


        </a-camera>

        <!-- light -->

        <a-entity light="type: ambient; color: #FFFFFF; intensity: 0.3"></a-entity>

        <a-sphere position="0 400 -5" radius="10" material="color: white; emissive: white; emissiveIntensity: 2">
        </a-sphere>

        <a-entity particle-animation position="0 0 0"></a-entity>
        <!-- wall -->

        <a-entity gltf-model="#house" position="-30 0 0" scale="0.4 0.4 0.4" rotation="0 180 0 "></a-entity>

        <a-entity position="8.55 11.3 -5.85" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.15 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>

        <a-entity position="8.55 11.3 7.15" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.15 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>

        <a-entity position="-15.6 11.3 20.1" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.15 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>


        <a-entity position="8.65 11.3 20.1" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.15 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>


        <a-entity position="-34.75 11.3 -1.07" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.5 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>


        <a-entity position="-34.75 11.3 14.27" light="type: point; color: #fff; intensity: 0.25; distance: 15">
            <a-box color="#ffff00" position="0 0 0" scale="1.5 1.15 1.15"
                material="emissive: #fffff0; emissiveIntensity: 0.6"></a-box>
        </a-entity>


        <a-entity gltf-model="#playstructure" unlit-material position="0 2 0" rotation="0 90 0"
            material="lighting: false"></a-entity>

        <a-entity gltf-model="#baking" position="0 2 0" rotation="0 90 0"></a-entity>



        <a-assets>

            <a-asset-item id="house" src="models/house.glb"></a-asset-item>
            <a-asset-item id="playstructure" src="models/oktest.glb"></a-asset-item>
            <a-asset-item id="baking" src="models/ihatebaking.glb"></a-asset-item>

        </a-assets>

    </a-scene>




    <script src="script.js"></script>
    <script src="updowncontrols.js"></script>

    <script>
        AFRAME.registerComponent('unlit-material', {
            init: function () {
                const el = this.el;
                el.addEventListener('model-loaded', () => {
                    const mesh = el.getObject3D('mesh');
                    if (!mesh) return;
                    mesh.traverse(node => {
                        if (node.isMesh) {
                            node.material = new THREE.MeshBasicMaterial({
                                map: node.material.map,
                                transparent: node.material.transparent,
                                alphaTest: node.material.alphaTest,
                            });
                        }
                    });
                });
            }
        });
    </script>

</body>

</html>